Physical Trough Thermal Storage
916
358
26
GroupBox

1
7
Name
5
9
GroupBox1
X
3
9
Y
3
6
Width
3
900
Height
3
347
Caption
5
14
Storage System
Bold
2
1
Numeric

1
16
Name
5
15
T_tank_cold_ini
X
3
648
Y
3
153
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
20
Numeric

1
16
Name
5
14
cold_tank_Thtr
X
3
258
Y
3
273
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
11
Choice

1
8
Name
5
18
combo_tes_htf_type
X
3
648
Y
3
177
Width
3
160
Height
3
21
Items
6
10
Solar Salt
Caloria
Hitec XL
VP-1
Hitec
Dowtherm Q
Dowtherm RP
Therminol 59
Therminol 66
User-defined...
Selection
3
4294967295
TabOrder
3
21
Numeric

1
16
Name
5
31
csp.dtr.tes.estimated_heat_loss
X
3
258
Y
3
249
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
10
Numeric

1
16
Name
5
22
csp.dtr.tes.fluid_dens
X
3
648
Y
3
297
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
24
Numeric

1
16
Name
5
21
csp.dtr.tes.fluid_sph
X
3
648
Y
3
321
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
25
Numeric

1
16
Name
5
25
csp.dtr.tes.htf_calc_temp
X
3
648
Y
3
273
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
23
Numeric

1
16
Name
5
28
csp.dtr.tes.htf_max_opt_temp
X
3
648
Y
3
249
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
16
Numeric

1
16
Name
5
28
csp.dtr.tes.htf_min_opt_temp
X
3
648
Y
3
225
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
16
Numeric

1
16
Name
5
21
csp.dtr.tes.hx_derate
X
3
648
Y
3
129
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
19
Numeric

1
16
Name
5
28
csp.dtr.tes.min_fluid_volume
X
3
258
Y
3
201
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
8
Numeric

1
16
Name
5
25
csp.dtr.tes.tank_diameter
X
3
258
Y
3
177
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
7
Numeric

1
16
Name
5
28
csp.dtr.tes.thermal_capacity
X
3
258
Y
3
81
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
3
Numeric

1
16
Name
5
7
dt_cold
X
3
648
Y
3
105
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
18
Numeric

1
16
Name
5
6
dt_hot
X
3
648
Y
3
81
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
17
Numeric

1
16
Name
5
11
eta_tes_htr
X
3
648
Y
3
57
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
16
Numeric

1
16
Name
5
6
h_tank
X
3
258
Y
3
129
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
5
Numeric

1
16
Name
5
10
h_tank_min
X
3
258
Y
3
153
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
6
Numeric

1
16
Name
5
13
hot_tank_Thtr
X
3
258
Y
3
297
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
12
MaterialProperties

1
6
Name
5
14
store_fl_props
X
3
648
Y
3
201
Width
3
98
Height
3
24
TabOrder
3
22
Numeric

1
16
Name
5
13
tank_max_heat
X
3
648
Y
3
33
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
15
Numeric

1
16
Name
5
10
tank_pairs
X
3
258
Y
3
105
Width
3
100
Height
3
21
Value
1
1.000000
Mode
3
0
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4
Numeric

1
16
Name
5
7
tshours
X
3
258
Y
3
33
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
1
Numeric

1
16
Name
5
6
u_tank
X
3
258
Y
3
225
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
9
Numeric

1
16
Name
5
8
vol_tank
X
3
258
Y
3
57
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
2

39
T_tank_cold_ini
3
1
Initial TES fluid temp
°C
Physical Trough Thermal Storage
0
2
1
1
1
1
300.000000
Numeric
T_tank_hot_inlet_min
3
1
Minimum hot tank htf inlet temperature
C
Physical Trough Thermal Storage
0
2
1
1
1
1
400.000000
Default
V_tank_hot_ini
3
1
Initial hot tank volume
m³
Physical Trough Thermal Storage
0
8
1
1
1
1
0.000000
Default
cold_tank_Thtr
3
1
Cold tank heater set point
°C
Physical Trough Thermal Storage
0
2
1
1
1
1
250.000000
Numeric
combo_tes_htf_type
3
1
Storage HTF fluid
 
Physical Trough Thermal Storage
125
Hitec Solar Salt|Caloria HT 43|Hitec XL|Therminol VP-1|Hitec|Dowtherm Q|Dowtherm RP|Therminol 59|Therminol 66|User-defined...
2
1
1
1
1
3.000000
Choice
csp.dtr.tes.estimated_heat_loss
3
1
Estimated heat loss
MWt
Physical Trough Thermal Storage
0
8
1
1
1
1
0.000000
Numeric
csp.dtr.tes.fluid_dens
3
1
TES fluid density
kg/m³
Physical Trough Thermal Storage
0
8
1
1
1
1
0.000000
Numeric
csp.dtr.tes.fluid_sph
3
1
TES specific heat
kJ/kg-K
Physical Trough Thermal Storage
0
8
1
1
1
1
0.000000
Numeric
csp.dtr.tes.htf_calc_temp
3
1
Fluid temperature
°C
Physical Trough Thermal Storage
0
8
1
1
1
1
0.000000
Numeric
csp.dtr.tes.htf_max_opt_temp
3
1
Storage HTF max operating temp
°C
Physical Trough Thermal Storage
0
8
1
1
1
1
0.000000
Numeric
csp.dtr.tes.htf_min_opt_temp
3
1
Storage HTF min operating temp
°C
Physical Trough Thermal Storage
0
8
1
1
1
1
0.000000
Numeric
csp.dtr.tes.hx_derate
3
1
Thermal storage exergetic efficiency
 
Physical Trough Thermal Storage
0
8
1
1
1
1
0.000000
Numeric
csp.dtr.tes.min_fluid_volume
3
1
Min fluid volume
m³
Physical Trough Thermal Storage
0
8
1
1
1
1
0.000000
Numeric
csp.dtr.tes.tank_diameter
3
1
Tank diameter
m
Physical Trough Thermal Storage
0
8
1
1
1
1
0.000000
Numeric
csp.dtr.tes.thermal_capacity
3
1
TES Thermal capacity
MWht
Physical Trough Thermal Storage
0
8
1
1
1
1
0.000000
Numeric
dt_cold
3
1
Cold side HX approach temp
°C
Physical Trough Thermal Storage
0
8
1
1
1
1
7.000000
Numeric
dt_hot
3
1
Hot side HX approach temp
°C
Physical Trough Thermal Storage
0
2
1
1
1
1
5.000000
Numeric
eta_tes_htr
3
1
Tank heater efficiency
 
Physical Trough Thermal Storage
0
2
1
1
1
1
0.980000
Numeric
f_tc_cold
3
1
Tank hot/cold flag
0/1
Physical Trough Thermal Storage
0
9
1
1
1
1
2.000000
Default
h_tank
3
1
Tank height
m
Physical Trough Thermal Storage
0
2
1
1
1
1
20.000000
Numeric
h_tank_min
3
1
Tank fluid min height
m
Physical Trough Thermal Storage
0
2
1
1
1
1
1.000000
Numeric
has_hot_tank_bypass
3
1
Bypass valve connects field outlet to cold tank
-
Physical Trough Thermal Storage
0
2
1
1
1
1
0.000000
Default
hot_tank_Thtr
3
1
Hot tank heater set point
°C
Physical Trough Thermal Storage
0
2
1
1
1
1
365.000000
Numeric
hx_config
3
1
Heat exchanger configuration
 
Physical Trough Thermal Storage
0
9
1
1
1
1
2.000000
Default
is_hx
3
1
Heat exchanger no/yes flag
0/1
Physical Trough Thermal Storage
0
9
1
1
1
1
0.000000
Default
nodes
3
1
Nodes modeled in the flow path
 
Physical Trough Thermal Storage
0
9
1
1
1
1
2000.000000
Default
store_fl_props
3
3
User-defined HTF fluid
 
Physical Trough Thermal Storage
0
0
1
3
1
1
1.000000
MaterialProperties
store_fluid
3
1
Storage HTF fluid ID number
 
Physical Trough Thermal Storage
0
9
1
1
1
1
0.000000
Default
t_ch_out_max
3
1
Max allowable cold side outlet temp during charge constant
 
Physical Trough Thermal Storage
0
9
1
1
1
1
500.000000
Default
t_dis_out_min
3
1
Min allowable hot side outlet temp during discharge constant
 
Physical Trough Thermal Storage
0
9
1
1
1
1
500.000000
Default
tank_max_heat
3
1
Tank heater capacity
MWe
Physical Trough Thermal Storage
0
2
1
1
1
1
0.000000
Numeric
tank_pairs
3
1
Parallel tank pairs
 
Physical Trough Thermal Storage
0
2
1
1
1
1
1.000000
Numeric
tanks_in_parallel
3
1
Tanks are in parallel, not in series, with solar field
-
Physical Trough Thermal Storage
0
2
1
1
1
1
1.000000
Default
tc_fill
3
1
Thermocline fill material constant
 
Physical Trough Thermal Storage
0
9
1
1
1
1
7.000000
Default
tc_void
3
1
Thermocline void fraction constant
 
Physical Trough Thermal Storage
0
9
1
1
1
1
0.250000
Default
tes_type
3
1
TES type (1=two-tank, 2=thermocline)
 
Physical Trough Thermal Storage
0
9
1
1
1
1
1.000000
Default
tshours
3
1
Full load hours of TES
hr
Physical Trough Thermal Storage
0
2
1
1
1
1
6.000000
Numeric
u_tank
3
1
Tank loss coeff
W/m²-K
Physical Trough Thermal Storage
0
2
1
1
1
1
0.300000
Numeric
vol_tank
3
1
Storage volume
m³
Physical Trough Thermal Storage
0
8
1
1
1
1
0.000000
Numeric

3596
equations{ 'store_fluid' } = define() {
	return ?${combo_tes_htf_type}
	[
		18, //    18.) Nitrate Salt**
		19, //    19.) Caloria HT 43**
		20, //    20.) Hitec XL**
		21, //    21.) Therminol VP-1**
		22, //    22.) Hitec**
		23, //    23.) Dowtherm Q**
		24, //    24.) Dowtherm RP**
		30, //    30.) Therminol 59
		29, //    29.) Therminol 66    
		50  //    user defined HTF
	];
};

equations{'csp.dtr.tes.fluid_dens'} = define() {
	if(${combo_tes_htf_type} < 9)
		return substance_density(${store_fluid},${csp.dtr.tes.htf_calc_temp} );
	else
		return substance_userhtf(${store_fl_props},${csp.dtr.tes.htf_calc_temp},'density');
};

equations{'csp.dtr.tes.fluid_sph'} = define() {
	if(${combo_tes_htf_type} < 9)
		return substance_specific_heat(${store_fluid},${csp.dtr.tes.htf_calc_temp} );
	else
		return substance_userhtf(${store_fl_props},${csp.dtr.tes.htf_calc_temp},'specific heat');
};		

equations{ 'dt_cold' } = define() {
	return ${dt_hot};
};

// 3.6.2015, twn: Set 'is_hx' in hx_derate_update_module
/*
equations{ 'is_hx' } = define() {
	if (${combo_tes_htf_type} == ${combo_htf_type})
		return 0;
	else
		return 1;
};
*/

equations{ 'csp.dtr.tes.htf_min_opt_temp' } = define() {
	return ?${combo_tes_htf_type}
	[
		238, /* fluid num 18 */ 	
		-12, /* fluid num 19 */ 	
		120, /* fluid num 20 */ 	
		12,  /* fluid num 21 */ 	
		142, /* fluid num 22 */ 	
		-35, /* fluid num 23 */ 	
		0,   /* fluid num 24 */ 	
		-45, /* fluid num 30 */ 	
		0,   /* fluid num 29 */ 	
		0    /* user fluid */ 
	];
};

equations{ 'csp.dtr.tes.estimated_heat_loss' } = define() {
	return ( ${h_tank}*3.1415926*${csp.dtr.tes.tank_diameter}
	 + 3.1415926*pow(${csp.dtr.tes.tank_diameter}/2,2) )*${tank_pairs}
	 *(${csp.dtr.tes.htf_calc_temp}-20)*${u_tank}/1000000;
};

equations{ 'csp.dtr.tes.htf_max_opt_temp' } = define() {
	return ?${combo_tes_htf_type}
	[
		593,/* fluid num 18 */
		315,/* fluid num 19 */
		500,/* fluid num 20 */
		400,/* fluid num 21 */
		538,/* fluid num 22 */
		330,/* fluid num 23 */
		330,/* fluid num 24 */
		315,/* fluid num 30 */
		345,/* fluid num 29 */
		0/* user fluid */
	];
};

equations{ 'csp.dtr.tes.htf_calc_temp' } = define() {
	return ( ${T_loop_in_des} + ${T_loop_out} )/2; };

equations{ 'csp.dtr.tes.thermal_capacity' } = define() {
	return ${P_ref}/${eta_ref}*${tshours}; };

equations{ 'vol_tank' } = define() { 
	return ${csp.dtr.tes.thermal_capacity}
		 *1000000
		 *3600
		/
		( ${csp.dtr.tes.fluid_dens}
		  *${csp.dtr.tes.fluid_sph}*1000
		  *${csp.dtr.tes.hx_derate}
		  * ((${T_loop_out}-${dt_hot}) - 
			 (${T_loop_in_des}-${dt_cold})) );
};

equations{ 'V_tank_hot_ini' } = define() {
	return ${h_tank_min}/${h_tank}*${vol_tank}; };

equations{ 'csp.dtr.tes.min_fluid_volume' } = define() {
	return ${vol_tank}*${h_tank_min}/${h_tank}; };

// 3.6.2015, twn: Key on 'is_hx'
//equations{ 'csp.dtr.tes.hx_derate' } = define() {
//	if (${Fluid} == ${store_fluid} )
//		return 1; /* fluids are the same, no HX */
//	else
//		return 1-(${dt_hot}+${dt_cold})/(${T_loop_out}-${T_loop_in_des});
//};
equations{ 'csp.dtr.tes.hx_derate' } = define() {
	if (${is_hx} != 1 )
		return 1; /* fluids are the same, no HX */
	else
	{
		dt_ave = 0.5*(${dt_hot}+${dt_cold});
		T_htf_ave = 0.5*(${T_loop_out}+${T_loop_in_des});
		T_cold_baseline = 50.0;
		return (T_htf_ave-2*dt_ave-T_cold_baseline)/(T_htf_ave-T_cold_baseline);
		//return (${T_loop_out}-dt_ave-50.0)/(
		//return 1-(${dt_hot}+${dt_cold})/(${T_loop_out}-${T_loop_in_des});
	}
};

equations{ 'csp.dtr.tes.tank_diameter' } = define() {
	return 2*sqrt(${vol_tank}/(${h_tank}*3.1415926*${tank_pairs}));
};

2725
on_load{'Physical Trough Thermal Storage'} = define() {
	on_change{"combo_tes_htf_type"}();
	hx_derate_update();
	
	// constants and initial conditions
	value("tc_fill", 7);
	value("tc_void", 0.25);
	value("t_dis_out_min", 500);
	value("t_ch_out_max", 500);
	value("nodes", 2000);
	value("f_tc_cold", 2);
	
};

function hx_derate_update_module() {
	
	obj = ssc_create();
	
	ssc_var(obj, "HTF_code1", ${store_fluid});
	ssc_var(obj, "fl_props1", ${store_fl_props});
	
	ssc_var(obj, "HTF_code2", ${Fluid});
	ssc_var(obj, "fl_props2", ${field_fl_props});

	ret = ssc_exec(obj, 'user_htf_comparison', {'show_dialog'=false, 'hold_dialog'=false});
	
	are_equal = ssc_var(obj, "are_equal");

	is_hx = !(are_equal==1);

	enable('dt_hot', is_hx );
	enable('dt_cold', is_hx );

	// Set 'is_hx' here
	value("is_hx", is_hx);
	//value("flux_max_dsg", flux_max_dsg);
	
	ssc_free( obj );
}

function hx_derate_update() {
	
	hx_derate_update_module();
	
	//sf_htf = value("combo_htf_type");
	//tes_htf = value("combo_tes_htf_type");

	//enable('dt_hot', ( (sf_htf!=tes_htf) || ((sf_htf==9)&&(tes_htf==9))) );
	//enable('dt_cold', ( (sf_htf!=tes_htf) || ((sf_htf==9)&&(tes_htf==9))) ) ;
}

on_change{"store_fl_props"} = define(){
	hx_derate_update_module();
};

on_change{"combo_tes_htf_type"}=define(){
	hx_derate_update();
	
    bUserDefined = (${combo_tes_htf_type} == 9);
    enable("store_fl_props", bUserDefined);
    enable("csp.dtr.tes.htf_min_opt_temp",!bUserDefined);
    enable("csp.dtr.tes.htf_max_opt_temp",!bUserDefined);

	// density
	//if (${combo_tes_htf_type} < 9 )
	//	fluid_dens_temp = substance_density( ${store_fluid}, ${csp.dtr.tes.htf_calc_temp} );
	//else
	//	fluid_dens_temp = cspdtr_tes_userhtf( 2, ${csp.dtr.tes.htf_calc_temp} );
	//value('csp.dtr.tes.fluid_dens',fluid_dens_temp);

	// specific heat
	//if (${combo_tes_htf_type} < 9 )
	//	fluid_sph_temp = substance_specific_heat( ${store_fluid}, ${csp.dtr.tes.htf_calc_temp} );
	//else
	//	fluid_sph_temp = cspdtr_tes_userhtf( 1, ${csp.dtr.tes.htf_calc_temp} );
	//value('csp.dtr.tes.fluid_sph',fluid_sph_temp);

};

/*
function cspdtr_tes_userhtf(col, temperatureC) {
	// specific heat is property 1
	// density is property 2
	aUserDefHTF = value("store_fl_props");
	
	rows = #aUserDefHTF;
	cols = #aUserDefHTF[0];

	if (cols != 7 || rows < 2 || col < 0 || col >= 7) return 1.0;
	for (i=1;i<rows;i++)
	{
		if (aUserDefHTF[i][0] >= temperatureC)
		{
			// interp and return 
			xmin = aUserDefHTF[i-1][0];
			xmax = aUserDefHTF[i][0];
			ymin = aUserDefHTF[i-1][col];
			ymax = aUserDefHTF[i][col];
			if (xmax <= xmin) return 1.0;

			percent = (temperatureC-xmin)/(xmax-xmin);
			return ymin + percent*(ymax-ymin);
		}
	}

	return aUserDefHTF[rows-1][col];
}
*/