Physical Trough Collector Type 2
803
342
21
GroupBox

1
7
Name
5
9
GroupBox1
X
3
6
Y
3
39
Width
3
791
Height
3
107
Caption
5
18
Collector Geometry
Bold
2
1
GroupBox

1
7
Name
5
9
GroupBox2
X
3
6
Y
3
150
Width
3
791
Height
3
101
Caption
5
18
Optical Parameters
Bold
2
1
GroupBox

1
7
Name
5
9
GroupBox4
X
3
6
Y
3
255
Width
3
791
Height
3
80
Caption
5
20
Optical Calculations
Bold
2
1
DataArray

1
9
Name
5
6
IAMs_2
X
3
270
Y
3
168
Width
3
90
Height
3
24
Mode
3
2
Label
5
0
Description
5
0
TabOrder
3
4294967295
Button

1
7
Name
5
25
apply_collector_library_2
X
3
585
Y
3
9
Width
3
209
Height
3
21
Caption
5
25
Apply Values from Library
TabOrder
3
2
Numeric

1
16
Name
5
23
csp_dtr_sca_ap_length_2
X
3
270
Y
3
279
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
17
Numeric

1
16
Name
5
22
csp_dtr_sca_aperture_2
X
3
270
Y
3
63
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
3
Numeric

1
16
Name
5
27
csp_dtr_sca_ave_focal_len_2
X
3
666
Y
3
87
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
7
Numeric

1
16
Name
5
27
csp_dtr_sca_calc_end_loss_2
X
3
666
Y
3
279
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
19
Numeric

1
16
Name
5
22
csp_dtr_sca_calc_iam_2
X
3
270
Y
3
303
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
18
Numeric

1
16
Name
5
26
csp_dtr_sca_calc_sca_eff_2
X
3
666
Y
3
303
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
20
Numeric

1
16
Name
5
32
csp_dtr_sca_clean_reflectivity_2
X
3
666
Y
3
198
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
14
Numeric

1
16
Name
5
27
csp_dtr_sca_general_error_2
X
3
270
Y
3
222
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
16
Numeric

1
16
Name
5
30
csp_dtr_sca_geometry_effects_2
X
3
666
Y
3
174
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
13
Numeric

1
16
Name
5
20
csp_dtr_sca_length_2
X
3
270
Y
3
111
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
5
Numeric

1
16
Name
5
25
csp_dtr_sca_mirror_dirt_2
X
3
666
Y
3
222
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
15
Numeric

1
16
Name
5
26
csp_dtr_sca_ncol_per_sca_2
X
3
666
Y
3
63
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
0
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
6
TextEntry

1
10
Name
5
25
csp_dtr_sca_notify_text_2
X
3
183
Y
3
9
Width
3
397
Height
3
21
Text
5
0
Editable
2
0
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
1
Numeric

1
16
Name
5
25
csp_dtr_sca_piping_dist_2
X
3
666
Y
3
111
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
8
Numeric

1
16
Name
5
28
csp_dtr_sca_tracking_error_2
X
3
270
Y
3
198
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
12
Numeric

1
16
Name
5
23
csp_dtr_sca_w_profile_2
X
3
270
Y
3
87
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4

22
IAMs_2
3
2
Incidence angle modifier coefficients
 
Physical Trough Collector Type 2
0
2
1
2
1
3
1.000000 0.050600 -0.176300 

DataArray
csp_dtr_sca_ap_length_2
3
1
Length of single module
m
Physical Trough Collector Type 2
0
8
1
1
1
1
8.500000
Numeric
csp_dtr_sca_aperture_2
3
1
Reflective aperture area
mÂ²
Physical Trough Collector Type 2
0
2
1
1
1
1
470.299988
Numeric
csp_dtr_sca_ave_focal_len_2
3
1
Average surface-to-focus path length
m
Physical Trough Collector Type 2
0
2
1
1
1
1
1.800000
Numeric
csp_dtr_sca_calc_costh_2
3
1
Calculated costheta
 
Physical Trough Collector Type 2
0
8
1
1
1
1
0.000000
Default
csp_dtr_sca_calc_end_gain_2
3
1
End gain factor
 
Physical Trough Collector Type 2
0
8
1
1
1
1
0.000000
Default
csp_dtr_sca_calc_end_loss_2
3
1
End loss at summer solstice
 
Physical Trough Collector Type 2
0
8
1
1
1
1
0.000000
Numeric
csp_dtr_sca_calc_iam_2
3
1
IAM at summer solstice
 
Physical Trough Collector Type 2
0
8
1
1
1
1
0.000000
Numeric
csp_dtr_sca_calc_latitude_2
3
1
Latitude
 
Physical Trough Collector Type 2
0
8
1
1
1
1
0.000000
Default
csp_dtr_sca_calc_sca_eff_2
3
1
Optical efficiency at design
 
Physical Trough Collector Type 2
0
8
1
1
1
1
0.000000
Numeric
csp_dtr_sca_calc_theta_2
3
1
Calculated theta
 
Physical Trough Collector Type 2
0
8
1
1
1
1
0.000000
Default
csp_dtr_sca_calc_zenith_2
3
1
Calculated zenith
rad
Physical Trough Collector Type 2
0
8
1
1
1
1
0.000000
Default
csp_dtr_sca_clean_reflectivity_2
3
1
Mirror reflectance
 
Physical Trough Collector Type 2
0
2
1
1
1
1
0.935000
Numeric
csp_dtr_sca_general_error_2
3
1
General optical error
 
Physical Trough Collector Type 2
0
2
1
1
1
1
0.990000
Numeric
csp_dtr_sca_geometry_effects_2
3
1
Geometry effects
 
Physical Trough Collector Type 2
0
2
1
1
1
1
0.980000
Numeric
csp_dtr_sca_length_2
3
1
Length of collector assembly
m
Physical Trough Collector Type 2
0
2
1
1
1
1
102.000000
Numeric
csp_dtr_sca_mirror_dirt_2
3
1
Dirt on mirror
 
Physical Trough Collector Type 2
0
2
1
1
1
1
0.950000
Numeric
csp_dtr_sca_ncol_per_sca_2
3
1
Number of modules per assembly
 
Physical Trough Collector Type 2
0
2
1
1
1
1
12.000000
Numeric
csp_dtr_sca_notify_text_2
3
4
Collector name from library
 
Physical Trough Collector Type 2
0
0
1
4
16
Solargenix SGX-1
TextEntry
csp_dtr_sca_piping_dist_2
3
1
Piping distance between assemblies
m
Physical Trough Collector Type 2
0
2
1
1
1
1
1.000000
Numeric
csp_dtr_sca_tracking_error_2
3
1
Tracking error
 
Physical Trough Collector Type 2
0
2
1
1
1
1
0.994000
Numeric
csp_dtr_sca_w_profile_2
3
1
Aperture width, total structure
m
Physical Trough Collector Type 2
0
2
1
1
1
1
5.000000
Numeric

1819
equations{ 'csp_dtr_sca_calc_theta_2' } = define() {
	return acos(${csp_dtr_sca_calc_costh_2});
};

equations{ 'csp_dtr_sca_calc_sca_eff_2' } = define() {
	return  ${csp_dtr_sca_tracking_error_2}
			* ${csp_dtr_sca_geometry_effects_2}
			* ${csp_dtr_sca_clean_reflectivity_2}
			* ${csp_dtr_sca_mirror_dirt_2}
			* ${csp_dtr_sca_general_error_2};
};

equations{ 'csp_dtr_sca_calc_costh_2' } = define() {
	return  sqrt(1 - pow(cos(1.57-${csp_dtr_sca_calc_zenith_2}-${tilt}) - cos(${tilt}) 
			* cos(1.57-${csp_dtr_sca_calc_zenith_2}) * (1 - cos(0 - ${azimuth})), 2)
			);
};

equations{ 'csp_dtr_sca_calc_zenith_2' } = define() {
	return 3.1415926/180*(90-(90-(${lat}-23.5)));
};

equations{ 'csp_dtr_sca_calc_iam_2' } = define() {
	IAM = ${IAMs_2}[0];
	l_IAM = #${IAMs_2};
	if(l_IAM < 2)
	{
		return IAM;
	}
	else
	{
		for(i=1;i<l_IAM;i++)
		{
			IAM = IAM + ${IAMs_2}[i]*
			pow(${csp_dtr_sca_calc_theta_2},i)/${csp_dtr_sca_calc_costh_2};
		}
		return IAM;
	}

	//return ${csp_dtr_sca_iam0_2}
	//	+ ${csp_dtr_sca_calc_theta_2}/${csp_dtr_sca_calc_costh_2}*${csp_dtr_sca_iam1_2}
	//	+ pow(${csp_dtr_sca_calc_theta_2},2)/${csp_dtr_sca_calc_costh_2}*${csp_dtr_sca_iam2_2};
};

equations{ 'csp_dtr_sca_ap_length_2' } = define() {
	return ${csp_dtr_sca_length_2}/${csp_dtr_sca_ncol_per_sca_2};
};

equations{ 'csp_dtr_sca_calc_end_loss_2' } = define() {
	return  1 - (${csp_dtr_sca_ave_focal_len_2}*tan(${csp_dtr_sca_calc_theta_2}) 
			- ( ${nSCA} - 1) / ${nSCA} * ${csp_dtr_sca_calc_end_gain_2})
			/ (${csp_dtr_sca_length_2}*${csp_dtr_sca_ncol_per_sca_2});
};

equations{ 'csp_dtr_sca_calc_latitude_2' } = define() {
	return ${lat};
};

equations{ 'csp_dtr_sca_calc_end_gain_2' } = define() {
	return  max( ${csp_dtr_sca_ave_focal_len_2} * tan( ${csp_dtr_sca_calc_theta_2} ) 
			- ${csp_dtr_sca_piping_dist_2},
			0);
};


1052
on_change{'apply_collector_library_2'} = define() {
    
    value( 'csp_dtr_sca_notify_text_2', value('ui_collector_description') );
    value( 'csp_dtr_sca_aperture_2', value('ui_A_aperture') );
    value( 'csp_dtr_sca_w_profile_2', value('ui_W_aperture') );
    value( 'csp_dtr_sca_length_2', value('ui_L_SCA') );
    value( 'csp_dtr_sca_ncol_per_sca_2', value('ui_ColperSCA') );
    value( 'csp_dtr_sca_ave_focal_len_2', value('ui_Ave_Focal_length') );
    value( 'csp_dtr_sca_piping_dist_2', value('ui_Distance_SCA') );
	
    value( 'csp_dtr_sca_tracking_error_2', value('ui_TrackingError') );
    value( 'csp_dtr_sca_geometry_effects_2', value('ui_GeomEffects') );
    value( 'csp_dtr_sca_clean_reflectivity_2', value('ui_Rho_mirror_clean') );
    value( 'csp_dtr_sca_mirror_dirt_2', value('ui_Dirt_mirror') );
    value( 'csp_dtr_sca_general_error_2', value('ui_Error') );
    
    iamF0 = value('ui_IamF0');
	iamF1 = value('ui_IamF1');
	iamF2 = value('ui_IamF2');
	iamF3 = value('ui_IamF3');
	
	value( 'IAMs_2', [iamF0,iamF1,iamF2,iamF3] );
};
